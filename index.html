<html>

<head>
  <title>The Yee Machine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png">

  <link rel="manifest" href="favicons/manifest.json">
  <link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="style.css">
    <script src="jquery.min.js"></script>
    <!-- <script>




    function initMap() {

  var source = /** @type {!HTMLInputElement} */(
      document.getElementById('source'));
  var destination = /** @type {!HTMLInputElement} */(
          document.getElementById('dest'));



  var autocomplete = new google.maps.places.Autocomplete(source);
  var autocomplete1 = new google.maps.places.Autocomplete(destination);



  autocomplete.addListener('place_changed', function() {
    marker.setVisible(false);
    var place = autocomplete.getPlace();
    if (!place.geometry) {
      window.alert("No details available for input: '" + place.name + "'");
      return;
    }

  });
}

  </script> -->
</head>

<body style="background-color:white">
  <container>

  <!-- <input id="source" class="controls" type="text"
      placeholder="Starting Point">
      <input id="dest" class="controls" type="text"
          placeholder="Destination"> -->
          <input id="OP" class="controls" type="text"
              placeholder="FLUGRAND0">
              <input id="ED" class="controls" type="text"
                  placeholder="FLUTIMES0">
          <div class="button" style="background-color:black; color:white;width:10vw;margin-left:20px;text-align:center">Click</div>
          <div class="reset" style="background-color:black; color:white;width:10vw;margin-left:20px;text-align:center">Reset</div>


  <div class="directions">Best Route</div>
</container>


  <object class="animate" id="svgObject" type="image/svg+xml" data="map.svg">Your browser does not support SVGs</object>
  <nav></nav>





</body>
<!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDD3o_vzkcWmw4-yDtuFZ0F4lioqWn8eU8&libraries=places&callback=initMap"
        async defer></script> -->
        <script>

        var inputLink1 = $("#OP").val();
        var inputLink2 = $("#ED").val();
        console.log(inputLink2);
          $( ".button" ).click(function() {

            console.log(inputLink1);

            $.getJSON("https://railfish-backend.herokuapp.com/route?src="+inputLink1+"&dst="+inputLink2).done(function(response){
              console.log(response.path);
              console.log(response.path.length);
              var svg = document.getElementById("svgObject");
              var svgDoc = svgObject.contentDocument;
              var count = response.path.length;
              var last = response.path[0]
              console.log(count);


             for (var i = 0; i < count; i++){
               var id = response.path[i];
               if(id.charAt(id.length-1)==='_'){
                 id = id.substring(0, id.length-1);
                 $(svgDoc.getElementById(id)).css("animation","dashsouth 5s infinite cubic-bezier(0.5, 0.5, 0.5, 0.5)");
                 // downtown animation
               } else {
               //console.log(id);
                $(svgDoc.getElementById(id)).css("animation","dashnorth 5s infinite cubic-bezier(0.5, 0.5, 0.5, 0.5)");
              }
             }
           });
           $( ".reset" ).click(function() {
              for (var i = 0; i < count; i++){
                var id = response.path[i];
                if(id.charAt(id.length-1)==='_'){
                  id = id.substring(0, id.length-1);
                  $(svgDoc.getElementById(id)).css("animation","");
                  // downtown animation
                } else {
                //console.log(id);
                 $(svgDoc.getElementById(id)).css("animation","");
               }
              }
            });


        });
        </script>
</html>
